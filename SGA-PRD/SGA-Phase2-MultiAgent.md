# SGA Phase 2: å¤šæ™ºèƒ½ä½“ä¸å¯è§†åŒ–ç®¡ç†å¢å¼º PRD (Detailed)

**çŠ¶æ€**: ğŸ”´ æœªå®ç° (Pending Implementation)
**ç‰ˆæœ¬**: v1.1
**æ—¥æœŸ**: 2026-02-02
**ç›®æ ‡**: æ„å»º"ä¸€äººå…¬å¸"çš„ä¸“å± AI åŸºç¡€è®¾æ–½ï¼Œå®ç°æ³•åŠ¡ã€è´¢åŠ¡ã€å“ç‰Œç­‰å¤šè§’è‰²æ™ºèƒ½ä½“çš„å¯è§†åŒ–ç¼–æ’ä¸ç‹¬ç«‹è¿è¡Œã€‚

---

## 1. èƒŒæ™¯ä¸æ ¸å¿ƒç›®æ ‡ (Context & Objectives)

### 1.1 èƒŒæ™¯
å½“å‰ OpenClaw æ¶æ„åå‘å•ä½“æ™ºèƒ½ä½“ï¼Œå¤šæ™ºèƒ½ä½“é…ç½®ä¾èµ–ç¹ççš„æ‰‹åŠ¨ JSON ç¼–è¾‘å’Œæ–‡ä»¶æ“ä½œã€‚ç”¨æˆ·ï¼ˆä¸€äººå…¬å¸è€æ¿ï¼‰éœ€è¦ä¸åŒçš„æ™ºèƒ½ä½“ï¼ˆæ³•åŠ¡ã€è´¢åŠ¡ã€æ–°åª’ä½“ç­‰ï¼‰å„å¸å…¶èŒï¼Œä¸”å¸Œæœ›é€šè¿‡ç›´è§‚çš„ç•Œé¢è¿›è¡Œç®¡ç†ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨ä¿®æ”¹ä»£ç æˆ–é…ç½®ã€‚

### 1.2 æ ¸å¿ƒç›®æ ‡
1.  **å¤šæ™ºèƒ½ä½“æ¶æ„**: å®ç°åŸºäº **æœ¬åœ° Skills** çš„å¤šæ™ºèƒ½ä½“ç³»ç»Ÿï¼Œæ¯ä¸ªæ™ºèƒ½ä½“æ‹¥æœ‰ç‹¬ç«‹çš„æç¤ºè¯ã€çŸ¥è¯†åº“ã€å·¥å…·é›†å’Œè®°å¿†ã€‚
2.  **å¯è§†åŒ–é…ç½®**: å¼€å‘ **Gateway UI å¢å¼ºç‰ˆ**ï¼Œæä¾›"æ‰€è§å³æ‰€å¾—"çš„æ™ºèƒ½ä½“ä¸æ¨¡å‹é…ç½®ç•Œé¢ã€‚
3.  **çµæ´»æ¨¡å‹åº•åº§**: æ”¯æŒä¸åŒæ™ºèƒ½ä½“ç»‘å®šä¸åŒæ¨¡å‹ï¼ˆå¦‚æ³•åŠ¡ç”¨ Geminiï¼Œè´¢åŠ¡ç”¨ GPT-4ï¼‰ï¼Œå¹¶åŸç”Ÿæ”¯æŒ OpenAI å…¼å®¹æ¥å£ï¼ˆDeepSeek, Ollama ç­‰ï¼‰ã€‚
4.  **èµ„æºéš”ç¦»**: ç¡®ä¿ä¸åŒèŒèƒ½çš„æ™ºèƒ½ä½“äº’ä¸å¹²æ‰°ï¼ˆSession éš”ç¦» + Sandbox éš”ç¦»ï¼‰ï¼Œä½†åœ¨åŒä¸€å°æœºå™¨ä¸Šé«˜æ•ˆè¿è¡Œã€‚

---

## 2. è¯¦ç»†ç•Œé¢è®¾è®¡ (UI Prototypes)

### 2.1 æ™ºèƒ½ä½“ç®¡ç† (Agent Manager)

**è·¯å¾„**: `/ui/agents`

#### A. æ™ºèƒ½ä½“åˆ—è¡¨é¡µ (Agent List)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– æ™ºèƒ½ä½“ç®¡ç† (Agents)                     [+ æ–°å»ºæ™ºèƒ½ä½“]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ âš–ï¸ æ³•åŠ¡æ™ºèƒ½ä½“ (Legal) â”‚  â”‚ ğŸ’° è´¢åŠ¡æ™ºèƒ½ä½“ (Finance)â”‚          â”‚
â”‚  â”‚ çŠ¶æ€: ğŸŸ¢ åœ¨çº¿        â”‚  â”‚ çŠ¶æ€: ğŸŸ¡ å¤„ç†ä¸­      â”‚          â”‚
â”‚  â”‚ æ¨¡å‹: Gemini 2.0     â”‚  â”‚ æ¨¡å‹: GPT-4.1        â”‚          â”‚
â”‚  â”‚ è·¯ç”±: Telegram ç¾¤    â”‚  â”‚ è·¯ç”±: Slack #finance â”‚          â”‚
â”‚  â”‚ [é…ç½®] [æ—¥å¿—] [å¼€å…³] â”‚  â”‚ [é…ç½®] [æ—¥å¿—] [å¼€å…³] â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ ğŸ¨ å“ç‰Œè®¾è®¡ (Brand)  â”‚  â”‚ ğŸ“£ æ–°åª’ä½“ (Social)   â”‚          â”‚
â”‚  â”‚ çŠ¶æ€: âšª ç¦»çº¿        â”‚  â”‚ çŠ¶æ€: ğŸŸ¢ åœ¨çº¿        â”‚          â”‚
â”‚  â”‚ æ¨¡å‹: Claude Opus    â”‚  â”‚ æ¨¡å‹: Claude Sonnet  â”‚          â”‚
â”‚  â”‚ [é…ç½®] [æ—¥å¿—] [å¼€å…³] â”‚  â”‚ [é…ç½®] [æ—¥å¿—] [å¼€å…³] â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### B. æ™ºèƒ½ä½“é…ç½®è¯¦æƒ…é¡µ (Agent Editor)
**åŠŸèƒ½**: æ›¿ä»£æ‰‹åŠ¨ç¼–è¾‘ `openclaw.json` å’Œ `SKILL.md`ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é…ç½®: âš–ï¸ æ³•åŠ¡æ™ºèƒ½ä½“ (legal)                 [ä¿å­˜] [åˆ é™¤]     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. åŸºç¡€ä¿¡æ¯ (Basic)                                         â”‚
â”‚  â”œâ”€ åç§°:   [æ³•åŠ¡æ™ºèƒ½ä½“__________]                           â”‚
â”‚  â”œâ”€ ID:     [legal______________] (å”¯ä¸€æ ‡è¯†ï¼Œç”¨äºè·¯å¾„)       â”‚
â”‚  â””â”€ å›¾æ ‡:   [âš–ï¸] [é€‰æ‹© Emoji]                                â”‚
â”‚                                                              â”‚
â”‚  2. æ¨¡å‹ç»‘å®š (Model Binding)                                 â”‚
â”‚  â”œâ”€ ä¸»æ¨¡å‹:   [Google Gemini 2.0 Flash â–¼]                    â”‚
â”‚  â””â”€ å¤‡ç”¨æ¨¡å‹: [+ æ·»åŠ ] Anthropic Claude Sonnet 3.5           â”‚
â”‚     * å…è®¸ä¸åŒæ™ºèƒ½ä½“ä½¿ç”¨ä¸åŒæ¨¡å‹åº•åº§                         â”‚
â”‚                                                              â”‚
â”‚  3. æ ¸å¿ƒè®¾å®š (Prompt / Soul)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ“„ SKILL.md (ç³»ç»Ÿæç¤ºè¯)     [ä¸Šä¼  .md] [å…¨å±ç¼–è¾‘]   â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ # Role: Corporate Lawyer                             â”‚    â”‚
â”‚  â”‚ You are an expert in contract law and IP protection. â”‚    â”‚
â”‚  â”‚                                                      â”‚    â”‚
â”‚  â”‚ ## Rules                                             â”‚    â”‚
â”‚  â”‚ - Always cite relevant clauses.                      â”‚    â”‚
â”‚  â”‚ - Be precise and conservative.                       â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  4. çŸ¥è¯†åº“ (Knowledge Base)                                  â”‚
â”‚  â”œâ”€ ğŸ“ åŠ³åŠ¨åˆåŒæ¨¡æ¿.pdf                       [é¢„è§ˆ] [åˆ é™¤]  â”‚
â”‚  â”œâ”€ ğŸ“ å…¬å¸åˆè§„æ‰‹å†Œ.docx                      [é¢„è§ˆ] [åˆ é™¤]  â”‚
â”‚  â””â”€ [+ æ‹–æ‹½ä¸Šä¼ æ–‡ä»¶åˆ°æ­¤å¤„]                                   â”‚
â”‚     * è‡ªåŠ¨ä¿å­˜åˆ° workspace/skills/legal/knowledge/           â”‚
â”‚                                                              â”‚
â”‚  5. èƒ½åŠ›ä¸å·¥å…· (Skills & Tools)                              â”‚
â”‚  â˜‘ bash (å‘½ä»¤è¡Œ)       â˜‘ browser (æµè§ˆå™¨)     â˜ canvas       â”‚
â”‚  â˜‘ sessions (é€šä¿¡)     â˜ cron (å®šæ—¶ä»»åŠ¡)      â˜ discord      â”‚
â”‚  â˜‘ memory (è®°å¿†æ£€ç´¢)   â˜ image (ç»˜å›¾)         â˜ tts (è¯­éŸ³)   â”‚
â”‚                                                              â”‚
â”‚  6. è·¯ç”±ç»‘å®š (Routing)                                       â”‚
â”‚  â”œâ”€ Telegram:  [@legal_bot______] æˆ– [Group ID]  [éªŒè¯]      â”‚
â”‚  â”œâ”€ Slack:     [#legal-team_____]                [éªŒè¯]      â”‚
â”‚  â””â”€ [+ æ·»åŠ æ¸ é“ç»‘å®š]                                         â”‚
â”‚                                                              â”‚
â”‚  7. å®‰å…¨æ²™ç®± (Sandbox)                                       â”‚
â”‚  â˜‘ å¯ç”¨ Docker éš”ç¦» (æ¨èç”¨äºæ•æ„Ÿæ“ä½œ)                       â”‚
â”‚  â˜ å…è®¸æ–‡ä»¶ç³»ç»Ÿå†™å…¥                                          â”‚
â”‚  â˜ å…è®¸å…¬ç½‘è®¿é—®                                              â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ¨¡å‹ç®¡ç† (Model Manager)

**è·¯å¾„**: `/ui/models`

#### A. æ¨¡å‹é…ç½®é¡µ
**åŠŸèƒ½**: ç»Ÿä¸€ç®¡ç†å®˜æ–¹æ¨¡å‹ä¸ OpenAI å…¼å®¹æ¨¡å‹ï¼ˆDeepSeek, Moonshot, Ollamaï¼‰ã€‚

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ”Œ æ¨¡å‹ç®¡ç† (Model Providers)              [+ æ·»åŠ æä¾›å•†]    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  å¿«é€Ÿæ·»åŠ æ¨¡æ¿:                                               â”‚
â”‚  [DeepSeek] [Moonshot] [æ™ºè°±AI] [Groq] [Ollama] [è‡ªå®šä¹‰]     â”‚
â”‚                                                              â”‚
â”‚  å·²é…ç½®æ¨¡å‹:                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ”§ DeepSeek V3 (è‡ªå®šä¹‰)                  [ç¼–è¾‘] [åˆ é™¤] â”‚    â”‚
â”‚  â”‚ Provider ID: my-deepseek                             â”‚    â”‚
â”‚  â”‚ Base URL:    https://api.deepseek.com/v1             â”‚    â”‚
â”‚  â”‚ API Key:     sk-********************                 â”‚    â”‚
â”‚  â”‚ Models:      deepseek-chat, deepseek-coder           â”‚    â”‚
â”‚  â”‚ [æµ‹è¯•è¿æ¥: ğŸŸ¢ æˆåŠŸ (145ms)]                           â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚ ğŸ  Local Ollama                          [ç¼–è¾‘] [åˆ é™¤] â”‚    â”‚
â”‚  â”‚ Base URL:    http://localhost:11434/v1               â”‚    â”‚
â”‚  â”‚ Models:      qwen2.5:32b, llama3                     â”‚    â”‚
â”‚  â”‚ [æµ‹è¯•è¿æ¥: ğŸ”´ å¤±è´¥ (Connection refused)]              â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### B. æ·»åŠ /ç¼–è¾‘æ¨¡å‹å¼¹çª—
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é…ç½®è‡ªå®šä¹‰æ¨¡å‹ (OpenAI Compatible)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Provider ID:   [my-deepseek_____________]                   â”‚
â”‚  Base URL:      [https://api.deepseek.com/v1_____________]  â”‚
â”‚  API Key:       [sk-xxxxxxxxxxxxx_______] [ğŸ‘ï¸ æ˜¾ç¤º]         â”‚
â”‚                                                              â”‚
â”‚  æ¨¡å‹åˆ—è¡¨ (Models):                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ ID: [deepseek-chat]  Name: [DeepSeek V3 Chat]    â”‚        â”‚
â”‚  â”‚ Context: [64000]     Cost($/1M): In[0.1] Out[0.2]â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚  [+ æ·»åŠ æ¨¡å‹ ID]                                             â”‚
â”‚                                                              â”‚
â”‚  [æµ‹è¯•è¿æ¥]  [ä¿å­˜é…ç½®]                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. ç³»ç»Ÿæ¶æ„ä¸æ•°æ®ç»“æ„ (Architecture & Data)

### 3.1 ç›®å½•ç»“æ„ (Directory Structure)
æ‰€æœ‰é…ç½®å¿…é¡»æŒä¹…åŒ–åˆ°æ–‡ä»¶ç³»ç»Ÿï¼Œä¾¿äº Git ç®¡ç†å’Œå¤‡ä»½ã€‚

```bash
~/.openclaw/
â”œâ”€â”€ openclaw.json          # ä¸»é…ç½®æ–‡ä»¶ï¼šåŒ…å«æ¨¡å‹å®šä¹‰ã€è·¯ç”±æ˜ å°„ã€Agent åŸºç¡€é…ç½®
â”œâ”€â”€ credentials/           # æ•æ„Ÿä¿¡æ¯ï¼šAPI Keys (åŠ å¯†å­˜å‚¨æˆ–é€šè¿‡ Env æ³¨å…¥)
â””â”€â”€ workspace/             # å·¥ä½œåŒº
    â”œâ”€â”€ AGENTS.md          # å…¨å±€ Agent å®šä¹‰ï¼ˆå¯é€‰ï¼‰
    â””â”€â”€ skills/            # æ™ºèƒ½ä½“ç‹¬ç«‹æŠ€èƒ½ç›®å½•
        â”œâ”€â”€ legal/         # [Agent ID: legal]
        â”‚   â”œâ”€â”€ SKILL.md   # æ ¸å¿ƒæç¤ºè¯
        â”‚   â””â”€â”€ knowledge/ # çŸ¥è¯†åº“æ–‡ä»¶ (PDF, Docx, MD)
        â”œâ”€â”€ finance/       # [Agent ID: finance]
        â”‚   â”œâ”€â”€ SKILL.md
        â”‚   â””â”€â”€ knowledge/
        â””â”€â”€ social/        # [Agent ID: social]
            â”œâ”€â”€ SKILL.md
            â””â”€â”€ knowledge/
```

### 3.2 é…ç½®ç¤ºä¾‹ (openclaw.json)
```json5
{
  // 1. æ¨¡å‹æä¾›å•†é…ç½®
  "models": {
    "providers": {
      "deepseek": {
        "api": "openai-completions",
        "baseUrl": "https://api.deepseek.com/v1",
        "apiKey": "sk-...",
        "models": [{ "id": "deepseek-chat", "contextWindow": 64000 }]
      },
      "gemini": { "api": "google-generative-ai", ... }
    }
  },

  // 2. æ™ºèƒ½ä½“å®šä¹‰ä¸æ¨¡å‹ç»‘å®š
  "agents": {
    "legal": {
      "model": { "primary": "gemini/gemini-2.0-flash" },
      "workspace": "~/.openclaw/workspace",
      "skills": ["legal"],
      "sandbox": { "mode": "docker" }
    },
    "finance": {
      "model": { "primary": "openai/gpt-4.1" },
      "workspace": "~/.openclaw/workspace",
      "skills": ["finance"]
    }
  },

  // 3. è·¯ç”±æ˜ å°„ (Routing)
  "channels": {
    "telegram": {
      "groups": {
        "legal_group_id": { "agent": "legal" },
        "finance_group_id": { "agent": "finance" }
      }
    },
    "slack": {
      "channels": {
        "C123456": { "agent": "social" }
      }
    }
  }
}
```

---

## 4. æŠ€æœ¯å®ç°è§„åˆ’ (Implementation Plan)

### 4.1 åç«¯ API å¼€å‘ (Gateway Server)
æ–‡ä»¶ä½ç½®: `src/gateway/server-methods/`

1.  **`agents.list`**: è¯»å– `openclaw.json` å’Œ `skills/` ç›®å½•ï¼Œèšåˆè¿”å›æ‰€æœ‰ Agent çŠ¶æ€ã€‚
2.  **`agents.create`**:
    *   åœ¨ `openclaw.json` æ·»åŠ æ¡ç›®ã€‚
    *   åœ¨ `workspace/skills/` åˆ›å»ºå¯¹åº”ç›®å½•å’Œé»˜è®¤ `SKILL.md`ã€‚
3.  **`agents.update`**: æ›´æ–°é…ç½®ã€é‡è½½ SKILL å†…å®¹ã€‚
4.  **`agents.uploadFile`**: å¤„ç†çŸ¥è¯†åº“æ–‡ä»¶ä¸Šä¼ ï¼Œæµå¼å†™å…¥ `knowledge/` ç›®å½•ã€‚
5.  **`models.test`**: å‘èµ·è½»é‡çº§ HTTP è¯·æ±‚éªŒè¯ Provider è¿é€šæ€§ã€‚

### 4.2 å‰ç«¯å¼€å‘ (UI)
æ–‡ä»¶ä½ç½®: `ui/src/`

1.  **è·¯ç”±å¢åŠ **: ä¿®æ”¹ `ui/src/routes.ts` æ·»åŠ  `/agents` å’Œ `/models`ã€‚
2.  **ç»„ä»¶å¼€å‘**:
    *   `agent-card.ts`: æ™ºèƒ½ä½“çŠ¶æ€å¡ç‰‡ã€‚
    *   `skill-editor.ts`: Monaco Editor é›†æˆï¼Œç”¨äºç¼–è¾‘ Promptã€‚
    *   `model-provider-form.ts`: æ¨¡å‹é…ç½®è¡¨å•ã€‚
3.  **çŠ¶æ€ç®¡ç†**: æ‰©å±• `ui/src/store.ts` åŒæ­¥ Agent åˆ—è¡¨çŠ¶æ€ã€‚

### 4.3 æ ¸å¿ƒé€»è¾‘å¢å¼º
1.  **åŠ¨æ€åŠ è½½**: ç¡®ä¿ Gateway åœ¨ä¸é‡å¯çš„æƒ…å†µä¸‹ï¼Œèƒ½çƒ­åŠ è½½ `SKILL.md` çš„å˜æ›´ã€‚
2.  **å¹¶å‘è°ƒåº¦**: éªŒè¯ `agents.defaults.concurrency` åœ¨å¤š Agent åœºæ™¯ä¸‹çš„è¡¨ç°ï¼Œç¡®ä¿"æ³•åŠ¡"å’Œ"è´¢åŠ¡"èƒ½å¹¶è¡Œå¤„ç†è¯·æ±‚ã€‚

---

## 5. Dify è¿ç§»ä¸å…¼å®¹ (Dify Migration)

å¯¹äºç°æœ‰çš„ Dify ç”¨æˆ·ï¼Œæä¾›å¹³æ»‘è¿‡æ¸¡æ–¹æ¡ˆï¼š

1.  **Dify ä½œä¸ºæ¨¡å‹åº•åº§**:
    *   ä¿ç•™ `dify-chat` provider ç±»å‹ã€‚
    *   åœ¨ UI ä¸­å…è®¸å°†æŸä¸ª Agent çš„æ¨¡å‹æŒ‡å‘ Dify Appï¼Œä½œä¸ºè¿‡æ¸¡ã€‚
2.  **ä¸€é”®å¯¼å…¥ (æœªæ¥è§„åˆ’)**:
    *   è¾“å…¥ Dify App ID å’Œ Keyï¼Œè‡ªåŠ¨æŠ“å– System Prompt å’Œ Knowledge å¹¶è½¬æ¢ä¸º OpenClaw æ ¼å¼ã€‚
